<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠ</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
  margin:0;
  font-family:"Segoe UI",sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;
}
.container{padding:20px}
h1{text-align:center;margin-bottom:20px}

.nav-buttons{
  display:flex;
  gap:10px;
  margin-bottom:15px
}
.nav-buttons button{
  flex:1;
  padding:12px;
  font-size:14px;
  border-radius:10px;
  border:none;
  font-weight:bold;
  cursor:pointer
}
.imsakiya-btn{background:#f9a825}
.dua-btn{background:#9b59b6;color:#fff}
.aamal-btn{background:#03a9f4;color:#fff}
.events-btn{background:#e67e22;color:#fff}
.ahkam-btn{background:#4caf50;color:#fff}

select,.action-btn{
  width:100%;
  padding:12px;
  margin-top:12px;
  font-size:15px;
  border-radius:10px;
  border:none
}
select{background:#fff;color:#000}
.action-btn{background:#1abc9c;font-weight:bold}
.back-btn{background:#607d8b;color:#fff}

.box{
  margin-top:20px;
  background:rgba(255,255,255,0.1);
  border-radius:12px;
  padding:15px;
  display:none
}

table{width:100%;border-collapse:collapse}
td{padding:8px;border-bottom:1px solid rgba(255,255,255,.2)}
td:last-child{text-align:left}

.day-btn{background:#3949ab;color:#fff;margin-top:8px}
</style>
</head>

<body>
<div class="container">

<h1>ğŸŒ™ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠ</h1>

<div class="nav-buttons" id="mainMenu">
  <button class="imsakiya-btn" onclick="openImsakiya()">Ø§Ù„Ø¥Ù…Ø³Ø§ÙƒÙŠØ©</button>
  <button class="dua-btn" onclick="openDuas()">Ø¯Ø¹Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ…</button>
  <button class="aamal-btn" onclick="openAamal()">Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø´Ù‡Ø±</button>
</div>

<div class="nav-buttons">
  <button class="events-btn" onclick="openEvents()">Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ø§Ù„Ø´Ù‡Ø±</button>
  <button class="ahkam-btn" onclick="openAhkam()">Ø£Ø­ÙƒØ§Ù… Ø§Ù„ØµÙŠØ§Ù…</button>
</div>

<!-- Ø§Ù„Ø¥Ù…Ø³Ø§ÙƒÙŠØ© -->
<div id="imsakiyaSection" class="box">
  <label>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</label>
  <select id="city" onchange="showImsakiyaMenu()">
    <option value="">â€” Ø§Ø®ØªØ± â€”</option>
    <option value="najaf">Ø§Ù„Ù†Ø¬Ù</option>
    <option value="karbala">ÙƒØ±Ø¨Ù„Ø§Ø¡</option>
    <option value="baghdad">Ø¨ØºØ¯Ø§Ø¯</option>
    <option value="basra">Ø§Ù„Ø¨ØµØ±Ø©</option>
  </select>

  <div id="imsakiyaMenu" style="display:none">
    <button class="action-btn" onclick="showToday()">ğŸ“… Ø¥Ù…Ø³Ø§ÙƒÙŠØ© Ø§Ù„ÙŠÙˆÙ…</button>
    <button class="action-btn" onclick="showMonth()">ğŸ—“ï¸ Ø¥Ù…Ø³Ø§ÙƒÙŠØ© Ø§Ù„Ø´Ù‡Ø±</button>
    <button class="action-btn back-btn" onclick="openImsakiya()">â¬… Ø±Ø¬ÙˆØ¹</button>
  </div>

  <div class="box" id="timesBox">
    <table>
      <tr><td>Ø§Ù„Ø¥Ù…Ø³Ø§Ùƒ</td><td id="sunrise"></td></tr>
      <tr><td>Ø§Ù„ÙØ¬Ø±</td><td id="fajr"></td></tr>
      <tr><td>Ø§Ù„Ø¸Ù‡Ø±</td><td id="dhuhr"></td></tr>
      <tr><td>Ø§Ù„Ù…ØºØ±Ø¨</td><td id="maghrib"></td></tr>
      <tr><td>Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„</td><td id="isha"></td></tr>
    </table>
    <button class="action-btn back-btn" onclick="showImsakiyaMenu()">â¬… Ø±Ø¬ÙˆØ¹</button>
  </div>

  <div class="box" id="monthBox">
    <div id="monthList"></div>
    <button class="action-btn back-btn" onclick="showImsakiyaMenu()">â¬… Ø±Ø¬ÙˆØ¹</button>
  </div>

  <button class="action-btn back-btn" onclick="goHome()">â¬… Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
</div>

<!-- Ø¨Ù‚ÙŠØ© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ÙƒÙ…Ø§ Ù‡ÙŠ -->
<div id="duasSection" class="box"><div id="duaText"></div><button class="action-btn back-btn" onclick="goHome()">â¬… Ø±Ø¬ÙˆØ¹</button></div>
<div id="aamalSection" class="box"><h3>ğŸ“¿ Ø§Ø®ØªØ± Ø§Ù„ÙŠÙˆÙ…</h3><div id="daysList"></div><button class="action-btn back-btn" onclick="goHome()">â¬… Ø±Ø¬ÙˆØ¹</button></div>
<div id="aamalDetails" class="box"><h3 id="aamalTitle"></h3><div id="aamalText"></div><button class="action-btn back-btn" onclick="openAamal()">â¬… Ø±Ø¬ÙˆØ¹</button></div>
<div id="eventsSection" class="box"><h3>ğŸ“… Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù†</h3><div id="eventsList"></div><button class="action-btn back-btn" onclick="goHome()">â¬… Ø±Ø¬ÙˆØ¹</button></div>
<div id="ahkamSection" class="box"><h3>âš–ï¸ Ø£Ù‡Ù… Ø§Ù„Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ø´Ø±Ø¹ÙŠØ©</h3><div id="ahkamList"></div><button class="action-btn back-btn" onclick="goHome()">â¬… Ø±Ø¬ÙˆØ¹</button></div>

</div>

<script>
let imsakiyaData=[];

fetch("imsakiya.json")
.then(res=>res.json())
.then(data=>imsakiyaData=data);

function hideAll(){
["mainMenu","imsakiyaSection","duasSection","aamalSection","aamalDetails","eventsSection","ahkamSection","timesBox","monthBox","imsakiyaMenu"]
.forEach(id=>document.getElementById(id).style.display="none");
}

function goHome(){hideAll();mainMenu.style.display="flex";}
function openImsakiya(){hideAll();imsakiyaSection.style.display="block";}

function showImsakiyaMenu(){
  if(!city.value) return;
  timesBox.style.display="none";
  monthBox.style.display="none";
  imsakiyaMenu.style.display="block";
}

function showToday(){
  imsakiyaMenu.style.display="none";
  timesBox.style.display="block";

  const today=new Date().toISOString().split("T")[0];
  const cityName=city.options[city.selectedIndex].text;

  const row=imsakiyaData.find(r=>r.Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©===cityName && r.Ø§Ù„ØªØ§Ø±ÙŠØ®===today);
  if(!row){alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…");return;}

  sunrise.innerText=row.Ø§Ù„Ø§Ù…Ø³Ø§Ùƒ;
  fajr.innerText=row.Ø§Ù„ÙØ¬Ø±;
  dhuhr.innerText=row.Ø§Ù„Ø¸Ù‡Ø±;
  maghrib.innerText=row.Ø§Ù„Ù…ØºØ±Ø¨;
  isha.innerText=row["Ù…Ù†ØªØµÙ Ø§Ù„Ù„ÙŠÙ„"];
}

function showMonth(){
  imsakiyaMenu.style.display="none";
  monthBox.style.display="block";
  monthList.innerHTML="";

  const cityName=city.options[city.selectedIndex].text;
  imsakiyaData.filter(r=>r.Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©===cityName)
  .forEach(r=>{
    monthList.innerHTML+=`
      <div class="box">
        ğŸŒ™ ${r.Ø±Ù…Ø¶Ø§Ù†} Ø±Ù…Ø¶Ø§Ù† â€“ ${r.Ø§Ù„ØªØ§Ø±ÙŠØ®}<br>
        Ø¥Ù…Ø³Ø§Ùƒ ${r.Ø§Ù„Ø§Ù…Ø³Ø§Ùƒ} | ÙØ¬Ø± ${r.Ø§Ù„ÙØ¬Ø±} | Ù…ØºØ±Ø¨ ${r.Ø§Ù„Ù…ØºØ±Ø¨}
      </div>`;
  });
}
</script>

</body>
</html>
